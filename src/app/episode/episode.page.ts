import { Component, OnInit, ViewChild, ViewContainerRef } from '@angular/core';
import { PluginLoaderService } from '../services/plugin-loader.service';

@Component({
  selector: 'app-tab1',
  templateUrl: 'episode.page.html',
  styleUrls: ['episode.page.scss']
})
export class EpisodePage implements OnInit {
  @ViewChild('episodeRef', { read: ViewContainerRef, static: true })
  episodeVCRef: ViewContainerRef;

  @ViewChild('episodeItemOptionRef', { read: ViewContainerRef, static: true })
  episodeItemOptionVCRef: ViewContainerRef;

  constructor(private pluginLoader: PluginLoaderService) {}

  ngOnInit() {
    this.loadPlugin();

    this.test();
  }

  loadPlugin() {
    const data = JSON.parse(
      `{"show":{"type":"show","title":"Pioneer One","overview":"Pioneer One is a 2010 American web series produced by Josh Bernhard and Bracey Smith. It has been funded purely through donations, and is the first series created for and released on BitTorrent networks.","rating":7.1,"votes":85,"imagesUrl":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"ids":{"trakt":32905,"slug":"pioneer-one","tvdb":"170551","imdb":"tt1748166","tmdb":33050,"tvrage":null},"ratings":{"imdb":{"name":"IMDb","url":"https://imdb.com/title/tt1748166","rating":null,"votes":null},"trakt":{"name":"Trakt","url":"https://trakt.tv/shows/32905","rating":7.1,"votes":85}},"year":2010,"certification":null,"runtime":35,"genres":["fantasy","science-fiction","war","drama"],"status":"ended","alternativeTitles":{"bs":"Pioneer One","gr":"Pioneer One","us":"Pioneer One","ru":"Пионер Один"},"originalTitle":"Pioneer One","trailer":"http://youtube.com/watch?v=icLQqVDk86Y","language":"en","firstAired":"2010-06-16T04:00:00.000Z","airedEpisodes":6,"network":null,"seasons":[{"type":"season","title":"Season 1","overview":"","rating":7.5,"votes":2,"imagesUrl":{"poster":null,"backdrop":null,"backdropOriginal":null,"posterOriginal":null},"ids":{"trakt":45071,"tvdb":null,"tmdb":44299,"tvrage":null},"ratings":{"imdb":{"name":"IMDb","url":null,"rating":null,"votes":null},"trakt":{"name":"Trakt","url":null,"rating":7.5,"votes":2}},"number":1,"code":"S01","isSpecial":false,"firstAired":"2010-06-16T04:00:00.000Z","airedEpisodes":6,"network":null,"episodeCount":6,"totalEpisodesWatched":0,"episodes":[{"type":"episode","title":"Earthfall","overview":"An object from space spreads radiation over North America. Fearing terrorism, U.S. Homeland Security agents are dispatched to investigate and contain the damage. What they discover is a forgotten relic of the old Soviet space program, whose return to Earth will have implications for the entire world.","rating":7.2,"votes":43,"imagesUrl":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"ids":{"trakt":780532,"tvdb":"2375761","imdb":"tt1834084","tmdb":773844,"tvrage":0},"ratings":{"imdb":{"name":"IMDb","url":"https://imdb.com/title/tt1834084","rating":null,"votes":null},"trakt":{"name":"Trakt","url":null,"rating":7.2,"votes":43}},"seasonNumber":1,"number":1,"absoluteNumber":null,"code":"S01E01","firstAired":"2010-06-16T04:00:00.000Z","runtime":35,"watched":false},{"type":"episode","title":"The Man From Mars","overview":"Hired Mars expert Dr. Zachary Walzer (Jack Haley) fights to prove the validity of the Mars story. Can he convince the government to mount a manned mission to Mars? Agent in charge Tom Taylor (James Rich) faces pressure from both the Canadians and his own superiors, and has to make a call.","rating":7.3,"votes":30,"imagesUrl":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"ids":{"trakt":780533,"tvdb":"3294321","imdb":"tt1835555","tmdb":773843,"tvrage":0},"ratings":{"imdb":{"name":"IMDb","url":"https://imdb.com/title/tt1835555","rating":null,"votes":null},"trakt":{"name":"Trakt","url":null,"rating":7.3,"votes":30}},"seasonNumber":1,"number":2,"absoluteNumber":null,"code":"S01E02","firstAired":"2010-12-15T05:00:00.000Z","runtime":35,"watched":false},{"type":"episode","title":"Alone in the Night","overview":"Now quarantined to the Calgary base for two weeks, Taylor and his team have bought time to get answers from the supposed Martian cosmonaut. But who can get him to talk?","rating":7.2,"votes":21,"imagesUrl":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"ids":{"trakt":780534,"tvdb":"3990361","imdb":"tt1834644","tmdb":773845,"tvrage":0},"ratings":{"imdb":{"name":"IMDb","url":"https://imdb.com/title/tt1834644","rating":null,"votes":null},"trakt":{"name":"Trakt","url":null,"rating":7.2,"votes":21}},"seasonNumber":1,"number":3,"absoluteNumber":null,"code":"S01E03","firstAired":"2011-03-28T04:00:00.000Z","runtime":35,"watched":false},{"type":"episode","title":"Triangular Diplomacy","overview":"As the media begins to question the story about the crashed satellite, Secretary McClellan (Einar Gunn) starts to play hardball with the Russians in pursuit of his own truth. But everything hinges on what Yuri (Aleksandr Evtushenko), the frightened boy at the center of it all, might have to say...","rating":7.2,"votes":19,"imagesUrl":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"ids":{"trakt":780535,"tvdb":"3990371","imdb":"tt1834645","tmdb":773846,"tvrage":0},"ratings":{"imdb":{"name":"IMDb","url":"https://imdb.com/title/tt1834645","rating":null,"votes":null},"trakt":{"name":"Trakt","url":null,"rating":7.2,"votes":19}},"seasonNumber":1,"number":4,"absoluteNumber":null,"code":"S01E04","firstAired":"2011-04-28T04:00:00.000Z","runtime":35,"watched":false},{"type":"episode","title":"Sea Change","overview":"When an unannounced visitor breaks in to the Calgary base with just days left in the Quarantine, tensions are higher than ever. The fate of Yuri and everyone on Tom Taylor’s team is about to be decided in this, the penultimate episode of the first season.","rating":7.6,"votes":19,"imagesUrl":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"ids":{"trakt":780536,"tvdb":"3990381","imdb":"tt1865903","tmdb":773848,"tvrage":0},"ratings":{"imdb":{"name":"IMDb","url":"https://imdb.com/title/tt1865903","rating":"7.5","votes":10},"trakt":{"name":"Trakt","url":"https://trakt.tv/shows/32905/seasons/1/episodes/5","rating":7.6,"votes":19}},"seasonNumber":1,"number":5,"absoluteNumber":null,"code":"S01E05","firstAired":"2011-10-05T04:00:00.000Z","runtime":35,"watched":false,"images_url":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"imdbId":"tt1865903","trakt":780536,"tmdbId":773848,"traktSeasonNumber":1,"traktNumber":5},{"type":"episode","title":"War of the World","overview":"Taylor prepares to go to the public with Yuri's story, and everyone discovers the consequences of their actions in the conclusion to Pioneer One's first season.","rating":8,"votes":16,"imagesUrl":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"ids":{"trakt":780537,"tvdb":"3990391","imdb":"tt1865902","tmdb":773847,"tvrage":0},"ratings":{"imdb":{"name":"IMDb","url":"https://imdb.com/title/tt1865902","rating":"7.1","votes":11},"trakt":{"name":"Trakt","url":"https://trakt.tv/shows/32905/seasons/1/episodes/6","rating":8,"votes":16}},"seasonNumber":1,"number":6,"absoluteNumber":null,"code":"S01E06","firstAired":"2011-12-13T05:00:00.000Z","runtime":35,"watched":false,"images_url":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"imdbId":"tt1865902","trakt":780537,"tmdbId":773847,"traktSeasonNumber":1,"traktNumber":6}]}],"images_url":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"imdbId":"tt1748166","traktId":32905,"tmdbId":33050},"episode":{"type":"episode","title":"Sea Change","overview":"When an unannounced visitor breaks in to the Calgary base with just days left in the Quarantine, tensions are higher than ever. The fate of Yuri and everyone on Tom Taylor’s team is about to be decided in this, the penultimate episode of the first season.","rating":7.6,"votes":19,"imagesUrl":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"ids":{"trakt":780536,"tvdb":"3990381","imdb":"tt1865903","tmdb":773848,"tvrage":0},"ratings":{"imdb":{"name":"IMDb","url":"https://imdb.com/title/tt1865903","rating":"7.5","votes":10},"trakt":{"name":"Trakt","url":"https://trakt.tv/shows/32905/seasons/1/episodes/5","rating":7.6,"votes":19}},"seasonNumber":1,"number":5,"absoluteNumber":null,"code":"S01E05","firstAired":"2011-10-05T04:00:00.000Z","runtime":35,"watched":false,"images_url":{"poster":"https://image.tmdb.org/t/p/w300/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdrop":null,"posterOriginal":"https://image.tmdb.org/t/p/original/p53wbsukyhJ8TieisoeU1zZr9iA.jpg","backdropOriginal":null},"imdbId":"tt1865903","trakt":780536,"tmdbId":773848,"traktSeasonNumber":1,"traktNumber":5}}`
    );

    this.pluginLoader.createComponent('episodes', this.episodeVCRef, data);
  }

  private test() {}
}
